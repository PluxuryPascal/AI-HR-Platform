// Package svc предоставляет инструменты для управления жизненным циклом
// взаимозависимых сервисов в Go-приложениях.
//
// Пакет позволяет описывать сервисы с явными зависимостями, гарантировать
// корректный порядок их инициализации, запускать их параллельно после готовности,
// а также останавливать в обратном порядке при завершении работы приложения.
//
// Подходит для сценариев, где необходимо обеспечить, чтобы сервисы,
// зависящие от внешних ресурсов (например, HTTP-сервер от базы данных),
// начинали работу только после готовности этих ресурсов.

package svc

import "context"

// Service описывает контракт для управляемого сервиса с поддержкой зависимостей.
//
// Каждый сервис должен иметь уникальное имя (Name), список зависимостей (DependsOn),
// а также методы для инициализации (Init), запуска (Run), остановки (Stop)
// и проверки готовности (HealthCheck).
//
// Жизненный цикл сервиса:
//  1. Init — синхронная подготовка ресурсов (подключение к БД, загрузка конфигурации).
//  2. HealthCheck — проверка готовности к работе (например, успешное подключение).
//  3. Run — основная работа сервиса (обычно блокирующая до завершения контекста).
//  4. Stop — освобождение ресурсов и корректное завершение.
//
// Метод DependsOn позволяет задать порядок запуска: сервис не будет запущен,
// пока все его зависимости не будут инициализированы и готовы.
type Service interface {
	Name() string
	DependsOn() []string
	Init(ctx context.Context) error
	HealthCheck(ctx context.Context) error
	Run(ctx context.Context) error
	Stop(ctx context.Context) error
}
